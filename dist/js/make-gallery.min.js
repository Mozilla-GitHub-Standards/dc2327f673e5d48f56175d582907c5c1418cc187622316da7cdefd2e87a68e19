var module=module||void 0;!function(e){function t(e,t,r,n){var i,a=c&&d?{username:c,password:d,sendImmediately:!0}:void 0,o={method:e,uri:t,json:r,headers:{}};a?o.auth=a:u&&(i=m.client.header(t,e,{credentials:u}),o.headers.Authorization=i.field),h(o,function(e,t,r){return e?n(e):u&&!m.client.authenticate(t,u,i.artifacts,{payload:JSON.stringify(r)})?n("Warning: The response does not authenticate - your traffic may be getting intercepted and modified"):(200===t.statusCode?n(null,r):n(r),void 0)})}function r(e,t,r,n){var i=new XMLHttpRequest;l?i.open(e,t,!0,c,d):i.open(e,t,!0),f&&i.setRequestHeader("X-CSRF-Token",f),i.setRequestHeader("Content-Type","application/json; charset=utf-8"),i.onreadystatechange=function(){var e,t;if(4===this.readyState){try{e=JSON.parse(this.responseText),t=e.error}catch(r){t=r}t?n(t):n(null,e)}},i.send(JSON.stringify(r))}function n(e,t,r,n){"function"==typeof r?(n=r,r={}):"string"==typeof r&&(t=r.length?t+"?"+r:t,r={}),t=s+t,o(e,t,r,n)}function i(e,t){function r(){return r.instance||(r.instance=a(t)),r.instance}function n(t,r,n){delete t[r];var i=[];return e.tags.forEach(function(e){n.test(e)&&i.push(e)}),t[r]=i,i}var i={get appTags(){return n(this,"appTags",/^[^@]+\:[^:]+/)},get userTags(){return n(this,"userTags",/^[^@]+@[^@]+\:[^:]+/)},get rawTags(){return n(this,"rawTags",/^[^:]+$/)},taggedWithAny:function(t){var r=e.tags;t=Array.isArray(t)?t:[t];for(var n=0;n<t.length;n++)if(r.indexOf(t[n])>-1)return!0;return!1},remixes:function(e){e=e||function(){},r().find({remixedFrom:i._id}).then(e)},locales:function(e){e=e||function(){},this.remixes(function(t,r){if(t)return e(t),void 0;var n=[];r.forEach(function(e){e.locale!==i.locale&&n.push(e)}),e(null,n)})},original:function(e){return e=e||function(){},i.remixedFrom?(r().find({_id:i._id}).then(e),void 0):(e(null,null),void 0)},update:function(e,t){t=t||function(){},r().update(i._id,i,t)}};return["url","contentType","locale","title","description","author","published","tags","thumbnail","username","remixedFrom","_id","emailHash","createdAt","updatedAt","likes","reports","remixurl","editurl"].forEach(function(t){i[t]=e[t]}),i.id=i._id,i}var a,o,s,u,l,c,d,f,h,m,p="/api/20130724/make/";a=function(e){function t(e,t,r,n){return r=r?r.toString():"",r.length?(r=n?"{!}"+r:r,e.push(encodeURIComponent(t)+"="+encodeURIComponent(r)),void 0):this}function r(e){return e.map(function(e){return e.trim()}).join(",")}function a(e,n,i,a){if(n){var o=n[i]||n,s=n.execution||"and";o=Array.isArray(o)?r(o):r(o.split(",")),o=s+","+o,t(e,i,o,a)}}var o="search";return s=e.apiURL,e.hawk?(u=e.hawk,o="protectedSearch"):e.auth&&(l=e.auth.split(":"),c=l[0],d=l[1]),e.csrf&&(f=e.csrf),{queryPairs:[],find:function(e){e=e||{};for(var t in e)e.hasOwnProperty(t)&&this[t]&&(Array.isArray(e[t])?this[t].apply(this,e[t]):this[t](e[t]));return this},author:function(e,r){return t(this.queryPairs,"author",e,r),this},user:function(e,r){return t(this.queryPairs,"user",e,r),this},tags:function(e,t){return a(this.queryPairs,e,"tags",t),this},tagPrefix:function(e,r){return t(this.queryPairs,"tagPrefix",e,r),this},url:function(e,r){return t(this.queryPairs,"url",e,r),this},contentType:function(e,r){return t(this.queryPairs,"contentType",e,r),this},remixedFrom:function(e,r){return t(this.queryPairs,"remixedFrom",e,r),this},id:function(e,r){return"string"==typeof e?t(this.queryPairs,"id",e,r):(Array.isArray(e)?e={id:e,execution:"or"}:e.execution="or",a(this.queryPairs,e,"id",r)),this},title:function(e,r){return t(this.queryPairs,"title",e,r),this},description:function(e,r){return t(this.queryPairs,"description",e,r),this},limit:function(e){return t(this.queryPairs,"limit",e),this},page:function(e){return t(this.queryPairs,"page",e),this},sortByField:function(e,r){var n;return"string"==typeof e?(n=e,n+=","+(r?r:"desc"),t(this.queryPairs,"sortByField",n),this):this},or:function(){return t(this.queryPairs,"or","1"),this},then:function(t){var r=this.queryPairs.join("&");this.queryPairs=[],n("GET",p+o,r,function(r,n){if(r)return t(r);if(!n)return t(null,[],0);for(var a=n.makes,o=0;o<a.length;o++)a[o]=i(a[o],e);t(null,a,n.total)})},create:function(e,t){return n("POST",p,e,t),this},update:function(e,t,r){return n("PUT",p+e,t,r),this},like:function(e,t,r){return n("PUT",p+"like/"+e,{maker:t},r),this},unlike:function(e,t,r){return n("PUT",p+"unlike/"+e,{maker:t},r),this},remove:function(e,t){return n("DELETE",p+e,t),this},autocompleteTags:function(e,t,r){r||"function"!=typeof t||(r=t,t=10);var i="t="+e+"&s="+t;return n("GET",p+"tags",i,r),this},report:function(e,t,r){return n("PUT",p+"report/"+e,{maker:t},r),this},cancelReport:function(e,t,r){return n("PUT",p+"cancelReport/"+e,{maker:t},r),this},remixCount:function(e,t,r){t=t||{};var i=t.from||"",a=t.to||"",o="id="+e+"&from="+i+"&to="+a;return n("GET",p+"remixCount",o,r),this}}},"undefined"!=typeof e&&e.exports?(h=require("request"),m=require("hawk"),o=t,e.exports=a):(o=r,"function"==typeof define&&define.amd?define("../bower_components/makeapi-client/src/make-api",[],function(){return a}):window.Make=a)}(module),function(){function e(e,t){var r,n,i,a,o,s,l,c,d,f,p,y,k,v,g,q,b,T,w,x,S,P,A,C=document.createElement("div"),M=t.hidden||[];if(C.innerHTML=u,C=C.querySelector(".make-node"),b=C.querySelector(".make-thumbnail"),M.indexOf("thumbnail")<0?(T=C.querySelector(".make-link"),T.setAttribute("href",e.url),e.thumbnail?b.style.backgroundImage="url("+e.thumbnail+")":t.fallbackThumbnail?b.style.backgroundImage="url("+t.fallbackThumbnail+")":b.classList.add("default-thumbnail")):b.parentNode.removeChild(b),k=C.querySelector("h1 a"),M.indexOf("title")<0?(k.setAttribute("href",e.url),k.innerHTML=e.title):k.parentNode.removeChild(k),M.indexOf("created-by")<0?(x=C.querySelector(".make-details-user"),x.innerHTML=e.username,S=t.profileBaseURL||h,x.setAttribute("href",S+e.username)):(P=C.querySelector(".make-meta-author"),P.parentNode.removeChild(P)),M.indexOf("created-at")<0?(i=C.querySelector(".make-details-timestamp"),a=new Date(e.createdAt),o=(new Date).getTime(),w=o-a,c=864e5,l=Math.floor(w/c),g=Math.floor(l/31),A=Math.floor(g/12),s=l>50?g>12?A+" years":g+" months":l+" days",i.innerHTML=s):(i=C.querySelector(".make-meta-timestamp"),i.parentNode.removeChild(i)),y=C.querySelector(".make-likes"),M.indexOf("likes-count")<0?(p=C.querySelector(".make-likes-count"),p.innerHTML=e.likes.length,0==e.likes.length&&(y.style.display="none"),e.likes.length>2&&(y.innerHTML=y.innerHTML+"s")):y.parentNode.removeChild(y),d=C.querySelector(".make-description"),M.indexOf("description")<0?d.innerHTML=e.description:d.parentNode.removeChild(d),q=C.querySelector(".make-remix"),M.indexOf("remix-button")<0?q.setAttribute("href",e.remixurl):q.parentNode.removeChild(q),f=C.querySelector(".make-like"),M.indexOf("like-button")>=0&&f.parentNode.removeChild(f),r=C.querySelector(".make-user-avatar"),M.indexOf("author-picture")<0?(t.fallbackAvatar||(t.fallbackAvatar=m),n="http://www.gravatar.com/avatar/"+e.emailHash+"?s=44&d="+encodeURIComponent(t.fallbackAvatar),r.setAttribute("src",n)):r.parentNode.removeChild(r),v=C.querySelector(".make-tags"),M.indexOf("tags")<0)for(var L=0;L<e.tags.length;L++){var O=document.createElement("a");O.classList.add("make-tag"),O.innerHTML=e.tags[L],O.setAttribute("href","https://webmaker.org/t/"+e.tags[L]),v.appendChild(O),v.innerHTML=v.innerHTML+" "}else v.parentNode.removeChild(v);return C}function t(t,r,i){r.forEach(function(r){t.appendChild(e(r,i))}),n()}function r(){var e=a.offsetWidth;return Math.floor(e/l)}function n(){var e=r();a.setAttribute("data-cols",e);for(var t=a.querySelectorAll(".make-node"),n=0,i=r(),o=Math.ceil(t.length/i),s=0;o>s;s++){n=0;for(var u=0;i>u;u++){var l=u+s*i,c=t[l];if(c){makeDetails=c.querySelector(".make-details"),makeDetails.style.height="";var d=makeDetails.offsetHeight;d>n&&(n=d)}}n-=50;for(var u=0;i>u;u++){var l=u+s*i,c=t[l];c&&(c.querySelector(".make-details").style.height=n+"px")}}}function i(e,r){r.apiURL=d;var n=r.elementSelector;a=document.querySelector(n),a.innerHTML=s,a.classList.contains("make-gallery")||a.classList.add("make-gallery");var i=this;if(this.element="string"==typeof n?document.querySelector(n):n,!n)throw new Error("you must provide an element or selector for the gallery");if(!r)throw new Error("you must provide a MakeAPI client Configuration object");var o=new f(r);return e.limit=e.limit?e.limit:c,o.find(e).then(function(e,n,a){if(e)throw e;a&&t(i.element,n,r)}),this}var a,o,s='<p class="make-no-results"><strong>Sorry!</strong> We couldnt find any makes that match your search.</p>',u=' <div class="make-node"> <div class="make-node-inner">    <a href="#" class="make-link">      <div class="make-thumbnail"></div>    </a>    <div class="make-details">      <h1>        <a href="#" class="make-details-link"></a>      </h1>      <p class="make-meta">        <img class="make-user-avatar">        <span class="make-meta-author">Created by <a href="#" class="make-details-user">@flukeout</a></span>        <span class="make-meta-timestamp"><span class="make-details-timestamp"></span> ago</span>        <span class="make-likes">,         <span class="make-likes-count"></span> like</span>        </span>     </p>     <p class="make-description"></p>      <div class="make-tags"></div>      </div>      <div class="button-container">        <a href="#" class="make-remix">          <span class="icon-remix"></span>          Remix        </a>      </div>    </div>',l=250,c=10,d="https://makeapi.webmaker.org",f=window.Make,h="https://webmaker.org/u/",m="https://i1.wp.com/stuff.webmaker.org/avatars/webmaker-avatar-44x44.png",p=25;window.onresize=function(){o&&window.clearTimeout(o),o=window.setTimeout(n,p)},"function"==typeof define&&define.amd?define("make-gallery",[],function(){return i}):window.MakeGallery=i}();